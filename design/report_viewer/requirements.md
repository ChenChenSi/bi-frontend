# 报表浏览 (Report Viewer) 需求文档

## 1. 概述
报表浏览是最终用户查看和分析报表的模块。核心目标是**高性能加载**、**实时刷新**、**交互式分析**。

## 2. 功能需求

### 2.1 加载策略
- **骨架屏优先 (Skeleton Loading)**:
  - 访问报表时，首先请求布局元数据（Layout Metadata）。
  - 根据元数据渲染占位容器，展示加载动画。
- **独立请求 (Independent Fetching)**:
  - 每个图表组件 (Widget) 拥有唯一的 UUID。
  - 组件根据 UUID **独立、并发**地请求后端数据接口。
  - 某个组件加载慢或失败不应阻塞其他组件的展示。

### 2.2 实时刷新 (Real-time Polling)
- **心跳机制**: 前端每隔固定时间（如 30秒）轮询一次后端状态接口。
- **差异更新**:
  - **全量刷新**: 若整个报表的布局结构发生变更（如新增了图表），刷新整个页面。
  - **增量刷新**: 若仅特定图表的数据有更新（后端返回变更标识），仅重新请求该图表的数据。

### 2.3 交互分析
- **全局过滤 (Global Filter)**:
  - 顶部栏提供全局筛选器（如下拉选择“年份”）。
  - 筛选后，通知所有订阅了该筛选条件的图表重新请求数据。
- **下钻 (Drill-down)**:
  - 用户点击图表元素（如柱状图的某个柱子）。
  - 弹出对话框，展示该维度下的详细数据列表（分页表格）。
- **联动 (Linkage)**: (可选) 图表 A 的点击可以触发图表 B 的过滤。

### 2.4 分享与权限提示
- **无权提示**: 若用户无权查看，显示友好提示及申请按钮。
- **分享**: 用户可将报表链接分享给同事，系统需校验接收者的权限。
